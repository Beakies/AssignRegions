ggplot(DFO_EEZ) + geom_sf(aes(fill = DFO_REGION))
write_sf(DFO_EEZ, "shapefiles/DFO_NAFO_EEZ.shp")
# load DFO Region shapefiles
regions <-read_sf("shapefiles/DFO_NAFO_EEZ.shp")
WSmap2 = WSmap1%>% # add regions
addPolygons(data = Canada,
stroke = T,
weight = 1,
color = "black",
fill = T,
fillColor = "gray",
fillOpacity = 1,
smoothFactor = 3) %>%
# add points coded for land
addCircleMarkers(data = WS_coords,
~LONGITUDE, ~LATITUDE,
weight = 1,
col = ~landcolors_points(LAND),
fillColor = NA,
radius = 4,
fillOpacity = 1,
stroke = F,
popup=(paste0(
"Row Number: ", WS_coords$ROWNUMBER, "<br>",
"Latitude: ", WS_coords$LATITUDE, "<br>",
"Longitude: ", WS_coords$LONGITUDE, "<br>",
"Region: ", WS_coords$REGION_CD)))%>%
addLegend("bottomright",
colors = colorpal3,
labels = c("Check", "OK"),
title = "Land whales?",
opacity = .5)
WSmap2
WSmap2 = WSmap1%>% # add regions
addPolygons(data = Canada,
stroke = T,
weight = 1,
color = "black",
fill = F,
fillColor = "gray",
fillOpacity = 1,
smoothFactor = 3) %>%
# add points coded for land
addCircleMarkers(data = WS_coords,
~LONGITUDE, ~LATITUDE,
weight = 1,
col = "black",
fillColor = ~landcolors_points(LAND),,
radius = 4,
fillOpacity = 1,
stroke = F,
popup=(paste0(
"Row Number: ", WS_coords$ROWNUMBER, "<br>",
"Latitude: ", WS_coords$LATITUDE, "<br>",
"Longitude: ", WS_coords$LONGITUDE, "<br>",
"Region: ", WS_coords$REGION_CD)))%>%
addLegend("bottomright",
colors = colorpal3,
labels = c("Check", "OK"),
title = "Land whales?",
opacity = .5)
WSmap2
WSmap2 = WSmap1%>% # add regions
addPolygons(data = Canada,
stroke = T,
weight = 1,
color = "black",
fill = F,
fillColor = "gray",
fillOpacity = 1,
smoothFactor = 3) %>%
# add points coded for land
addCircleMarkers(data = WS_coords,
~LONGITUDE, ~LATITUDE,
weight = 1,
col = "black",
fillColor = ~landcolors_points(LAND),
radius = 4,
fillOpacity = 1,
stroke = F,
popup=(paste0(
"Row Number: ", WS_coords$ROWNUMBER, "<br>",
"Latitude: ", WS_coords$LATITUDE, "<br>",
"Longitude: ", WS_coords$LONGITUDE, "<br>",
"Region: ", WS_coords$REGION_CD)))%>%
addLegend("bottomright",
colors = colorpal3,
labels = c("Check", "OK"),
title = "Land whales?",
opacity = .5)
WSmap2
WSmap2 = WSmap1%>% # add regions
addPolygons(data = Canada,
stroke = T,
weight = 1,
color = "black",
fill = F,
fillColor = "gray",
fillOpacity = 1,
smoothFactor = 3) %>%
# add points coded for land
addCircleMarkers(data = WS_coords,
~LONGITUDE, ~LATITUDE,
weight = 1,
col = "black",
fillColor = ~landcolors_points(LAND),
radius = 4,
fillOpacity = .75,
stroke = F,
popup=(paste0(
"Row Number: ", WS_coords$ROWNUMBER, "<br>",
"Latitude: ", WS_coords$LATITUDE, "<br>",
"Longitude: ", WS_coords$LONGITUDE, "<br>",
"Region: ", WS_coords$REGION_CD)))%>%
addLegend("bottomright",
colors = colorpal3,
labels = c("Check", "OK"),
title = "Land whales?",
opacity = .5)
WSmap2
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ%>%filter(DFO_REGION == "CAN"), aes(fill = DFO_REGION), alpha = 0.5, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
NAFO = read_sf("shapefiles/Originals/NAFO_Divisions_2021_poly_clipped.shp",  crs = 4326)
st_crs(NAFO)
#get coords
centroids <- sf::st_centroid(NAFO)
# get coordinates and add back to dataframe
centroids$Long<-st_coordinates(centroids)[,1] # get coordinates
centroids$Lat<-st_coordinates(centroids)[,2] # get coordinates
centroids = centroids%>%filter(!is.na(Division), SubArea != 6, SubArea !=1, Shape_Area >= 0.077)
st_crs(NAFO)
#Test PLOT--------
# set extent - Get the vertical and horizontal limits based on a spatial layer
ext <- ext(land)
ext = as.vector(ext)
ext[1:2]
my.pal = c("#8338EC",	"#10898D", "#94D2BD","#ee9b06", "#FF006E","#bb3e03", "grey")
show_col(my.pal)
`%notin%` <- Negate(`%in%`)
eq2 = "DFO Atlantic NAFO Regions "
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ%>%filter(DFO_REGION == "CAN"), aes(fill = DFO_REGION), alpha = 0.5, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.5, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
my.pal = c("#8338EC", "grey",	"#10898D", "#94D2BD","#ee9b06", "#FF006E","#bb3e03", )
show_col(my.pal)
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.5, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
my.pal = c("#8338EC", "grey",	"#10898D", "#94D2BD","#ee9b06", "#FF006E","#bb3e03", )
show_col(my.pal)
`%notin%` <- Negate(`%in%`)
eq2 = "DFO Atlantic NAFO Regions "
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
my.pal = c("#8338EC", "grey",	"#10898D", "#94D2BD","#ee9b06", "#FF006E","#bb3e03", )
show_col(my.pal)
`%notin%` <- Negate(`%in%`)
eq2 = "DFO Atlantic NAFO Regions "
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=colorpal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
WSmap1 <- leaflet() %>%
# add ocean basemap
addProviderTiles(
"Esri.OceanBasemap",
options = providerTileOptions(
variant = "Ocean/World_Ocean_Base")) %>%
# focus map in a certain area / zoom level
setView(lng = -63, lat = 44, zoom = 3) %>%
# add regions
addPolygons(data = mapregions,
stroke = T,
weight = 1,
color = ~regioncolors(DFO_REGION),
fill = T,
fillColor = ~regioncolors(DFO_REGION),
fillOpacity = 0.5,
smoothFactor = 3) %>%
# add WS points
addCircleMarkers(data = WS_coords,
~LONGITUDE, ~LATITUDE,
weight = 1,
col = 'black',
fillColor = ~regioncolors_points(REGION_CD),
radius = 4,
fillOpacity = 1,
stroke = T,
popup=(paste0(
"Row Number: ", WS_coords$ROWNUMBER, "<br>",
"Latitude: ", WS_coords$LATITUDE, "<br>",
"Longitude: ", WS_coords$LONGITUDE, "<br>",
"Region: ", WS_coords$REGION_CD)))%>%
addLegend("bottomright",
pal = regioncolors_points,
values = colorpal_fct,
title = "DFO Regions",
opacity = .5)
# show map with regions
WSmap1
region_labels<-c("AR","GULF", "MAR", "NFLD", "QC", "CAN", "OT")
DFO_EEZ = DFO_EEZ%>%mutate(DFO_REGION = factor(DFO_REGION, levels = region_labels))
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=colorpal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
my.pal<-c("#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02", "grey")
# my.pal = c("#8338EC", "grey",	"#10898D", "#94D2BD","#ee9b06", "#FF006E","#bb3e03", )
show_col(my.pal)
`%notin%` <- Negate(`%in%`)
eq2 = "DFO Atlantic NAFO Regions "
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=colorpal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
my.pal<-c("#e6ab02","#66a61e", "#e7298a","#d95f02","#7570b3","#1b9e77","grey")
# my.pal = c("#8338EC", "grey",	"#10898D", "#94D2BD","#ee9b06", "#FF006E","#bb3e03", )
show_col(my.pal)
`%notin%` <- Negate(`%in%`)
eq2 = "DFO Atlantic NAFO Regions "
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=colorpal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
my.pal<-c("#e6ab02","#66a61e", "#e7298a","#d95f02","#7570b3","#1b9e77","grey")
plot = ggplot() +
geom_sf(data = NAFO, fill = NA, col = "light blue", size = 0.2)+ #NAFO AREAS AND LABELS
# geom_sf(data = Canada, col = "darkgray", size = .2)+ #land data
geom_sf(data = DFO_EEZ, aes(fill = DFO_REGION), alpha = 0.65, colour = "black") +
# geom_label(data = centroids, aes(Long, Lat, label = Label), size = NA, colour = "black") +
geom_text_repel(data = centroids%>%filter(Label != "3M", Label != "5Zu", Label != "5Ze", Label != "5Zc"), aes(  Long,Lat, label = Label),
size = 3, fontface = "bold.italic",
nudge_x = 0.25, nudge_y = -0.25 )+
#Fishing areas and labels
scale_fill_manual(values=my.pal)+ #color palette
theme_bw()+
theme(legend.position = "right",
legend.title = element_blank(),
panel.grid = element_blank()) + #make grid disappear
xlab("") + ylab("") +
ggtitle(eq2)+
guides(colour = guide_legend(ncol = 1),
shape = guide_legend(ncol = 1),
fill = guide_legend(ncol = 1))+
# set map limits
# coord_sf(lims_method = "orthogonal",
#          xlim=ext[1:2], ylim=ext[3:4], expand = T
# )
# set map limits
coord_sf(xlim = c(-75, -47), ylim = c(41, 75), expand = T)
plot
ggsave(here("DFOregions_NAFO_2023.png"), width = 11.5, height = 8, units = "in", dpi = 300, plot )
